<div class="mat-headline">
  <div *ngIf="product.vendor">
    {{product.vendor}}
    {{product.title}}
    <strong>[{{product.vendorId}}]</strong>
    <button *ngIf="!product.internalCode" mat-raised-button style="float:right">В ассортимент</button>
    <span *ngIf="product.internalCode" style="float:right">{{product.internalCode}}</span>
  </div>
  <div *ngIf="!product.vendor">
    {{product.supplierName}}
    {{product.title}}
    <strong>[{{product.vendorId}}]</strong>

    <button *ngIf="!product.internalCode" mat-raised-button style="float:right">Добавить товар</button>
    <span *ngIf="product.internalCode" style="float:right">{{product.internalCode}}</span>
  </div>

</div>
<!--<div class="mat-body"> {{product.vendor}} </div>-->

<div class="container">

  <div class="center-panel">

    <mat-tab-group>
      <mat-tab>
        <ng-template matTabContent>
          <ng-template mat-tab-label><h3 class="modifH2">Фото</h3></ng-template>

            <app-hover-image-slider [imgList]="product.images"></app-hover-image-slider>
        </ng-template>
      </mat-tab>
      <mat-tab *ngIf="product.image360" label="360">
        <mat-card  style="margin-top: 10px">
          <mat-card-subtitle style="display: flex; justify-content: space-between;">
            <span>Фото 360</span>
          </mat-card-subtitle>
          <mat-card-content>
            <div style="height: 300px; width: 300px;">
              {{product.image360}}
            </div>
            <div [innerHTML]="product.image360"></div>
          </mat-card-content>
        </mat-card>
      </mat-tab>
      <mat-tab *ngIf="safeVideoUrl" label="Видео">
        <mat-card  style="margin-top: 10px; width: 560px;">
          <mat-card-subtitle style="display: flex; justify-content: space-between;">
            <span>Видео</span>
          </mat-card-subtitle>
          <mat-card-content>
            {{safeVideoUrl}}
            <iframe width="560" height="315" [src]="safeVideoUrl" frameborder="0" allowfullscreen></iframe>
            <!--<iframe [src]='product.videos[0]' frameborder="0" allowfullscreen></iframe>-->
          </mat-card-content>
        </mat-card>
      </mat-tab>
    </mat-tab-group>

    <mat-accordion  *ngIf="product.netto.packQty">
      <mat-expansion-panel disabled expanded style="margin: 10px 0;">
        <app-package-card [pack]="product.netto"></app-package-card>
      </mat-expansion-panel>
    </mat-accordion>

    <mat-accordion>
      <mat-expansion-panel *ngFor="let pack of product.packages">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <h3 class="modifH2">{{pack.packQty ? pack.packQty : 1}} {{pack.type}} [{{pack.barcode}}]</h3>
          </mat-panel-title>
          <mat-panel-description>

          </mat-panel-description>
        </mat-expansion-panel-header>
        <app-package-card [pack]="pack"></app-package-card>
      </mat-expansion-panel>
    </mat-accordion>

  </div>





  <div style="width: 100%">

    <div class="card">
      <h2 class="modifH2" >О товаре</h2>
      <div [innerHTML]="product.description"></div>

      <ul>
        <li *ngIf="product.country" matTooltip="Код страны{{product.id}}">Сделано в {{product.country}}</li>
        <li *ngIf="product.internalCode">Артикул 1С - {{product.internalCode}}</li>
        <li *ngIf="product.vendorId">Артикул поставщика - {{product.vendorId}}</li>
        <li *ngIf="product.vendor">Вендор - {{product.vendor}}</li>
        <li *ngIf="product.supplierName">Поставщик - {{product.supplierName}}</li>
      </ul>
    </div>




    <mat-card style="margin-top: 10px;" *ngIf="product.documents && product.documents.length > 0">
      <mat-card-subtitle><h2>Документы</h2></mat-card-subtitle>
      <mat-list>
        <mat-list-item *ngFor="let d of product.documents" style="height: auto">
          <div mat-line><strong>{{d.type}}</strong> <span style="font-style: italic">  ({{d.startDate | date:'dd-mm-yyyy'}} - {{d.endDate | date:'dd-mm-yyyy'}})</span></div>
          <div mat-line>{{d.certTitle}}</div>
          <a mat-icon-button class="mat-elevation-z2" *ngIf="d.url" style="color:black" href="{{d.url}}" target="_blank"><mat-icon>download</mat-icon></a>
        </mat-list-item>
      </mat-list>
    </mat-card>

    <mat-card style="margin-top: 10px;" *ngIf="product.attributes && product.attributes.length > 0">
      <mat-card-subtitle><h2>Характеристики</h2></mat-card-subtitle>
      <table mat-table [dataSource]="dataSource" class="full-width">

        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>
            Характеристика
          </th>

          <td mat-cell *matCellDef="let element"> {{element.attributeName}} </td>
        </ng-container>

        <!-- Value Column -->
        <ng-container matColumnDef="value">
          <th mat-header-cell *matHeaderCellDef>
            Значение
          </th>
          <td mat-cell *matCellDef="let element"> {{element.value}} </td>
        </ng-container>

        <!-- Etim Column -->
        <ng-container matColumnDef="etim">
          <th mat-header-cell *matHeaderCellDef>
            Значение
          </th>
          <td mat-cell *matCellDef="let element"> <mat-icon *ngIf="element.etimFeature" matTooltip="{{element.etimFeature}}">explicit</mat-icon>  </td>
        </ng-container>

        <!-- action Column -->
        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let element">
            <button  mat-icon-button class="mat-elevation-z2" matTooltip="Редактировать аттрибут" (click)="goToEdit(element.attributeId)">
              <mat-icon>edit</mat-icon>
            </button>
          </td>
        </ng-container>


        <tr mat-row *matRowDef="let row; columns: displayedAttrColumns;"></tr>
      </table>

    </mat-card>


  </div>
</div>




